<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AgentMigrationStateService">
    <option name="migrationStatus" value="COMPLETED" />
  </component>
  <component name="Ask2AgentMigrationStateService">
    <option name="migrationStatus" value="COMPLETED" />
  </component>
  <component name="AskMigrationStateService">
    <option name="migrationStatus" value="COMPLETED" />
  </component>
  <component name="CompilerConfiguration">
    <resourceExtensions>
      <entry name=".+\.(properties|xml|html|dtd|tld)" />
      <entry name=".+\.(gif|png|jpeg|jpg)" />
    </resourceExtensions>
    <wildcardResourcePatterns>
      <entry name="!?*.class" />
      <entry name="!?*.scala" />
      <entry name="!?*.groovy" />
      <entry name="!?*.java" />
    </wildcardResourcePatterns>
    <bytecodeTargetLevel target="11" />
  </component>
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/DISTRIBUTED_CACHE_EXPLANATION.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DISTRIBUTED_CACHE_EXPLANATION.md" />
              <option name="updatedContent" value="# Distributed Cache System - ID System and jvnGetSharedObject Explanation&#10;&#10;## Understanding the ID System&#10;&#10;You were right to be confused about the mixed use of strings and integers. Here's how it actually works:&#10;&#10;### Two-Level Naming System&#10;&#10;1. **Symbolic Names (Strings)**: Human-readable names like &quot;chatroom&quot;, &quot;counter&quot;, &quot;user_database&quot;&#10;   - Used by applications to register and lookup objects&#10;   - Example: `server.jvnRegisterObject(&quot;my_cache&quot;, jvnObject)`&#10;   - Example: `server.jvnLookupObject(&quot;my_cache&quot;)`&#10;&#10;2. **Object IDs (Integers)**: Unique numerical identifiers assigned by the coordinator&#10;   - Used internally for locking operations and distributed coordination&#10;   - Automatically assigned when you call `jvnCreateObject()`&#10;   - Example: Object gets ID 1001, 1002, etc.&#10;&#10;### The Flow&#10;&#10;```&#10;Application --&gt; &quot;my_cache&quot; (string name) --&gt; Coordinator maps to ID 1001 --&gt; Locking uses ID 1001&#10;```&#10;&#10;## How jvnGetSharedObject Works&#10;&#10;The `jvnGetSharedObject()` method is the key to accessing your cached data. Here's the complete flow:&#10;&#10;### 1. Object Creation Flow&#10;```java&#10;// Create a shared object (gets an ID from coordinator)&#10;HashMap&lt;String, String&gt; myData = new HashMap&lt;&gt;();&#10;JvnObject jvnObj = server.jvnCreateObject(myData);  // Gets ID from coordinator&#10;&#10;// Register with a name for easy lookup&#10;server.jvnRegisterObject(&quot;my_cache&quot;, jvnObj);&#10;```&#10;&#10;### 2. Reading Flow&#10;```java&#10;// Look up by name&#10;JvnObject jvnObj = server.jvnLookupObject(&quot;my_cache&quot;);&#10;&#10;// Lock for reading (coordinator ensures we get latest version)&#10;jvnObj.jvnLockRead();&#10;&#10;// Get the actual data object&#10;HashMap&lt;String, String&gt; data = (HashMap&lt;String, String&gt;) jvnObj.jvnGetSharedObject();&#10;&#10;// Use the data&#10;String value = data.get(&quot;some_key&quot;);&#10;&#10;// Always unlock&#10;jvnObj.jvnUnLock();&#10;```&#10;&#10;### 3. Writing Flow&#10;```java&#10;// Lock for writing (coordinator invalidates other readers/writers)&#10;jvnObj.jvnLockWrite();&#10;&#10;// Get the data&#10;HashMap&lt;String, String&gt; data = (HashMap&lt;String, String&gt;) jvnObj.jvnGetSharedObject();&#10;&#10;// Modify it&#10;data.put(&quot;new_key&quot;, &quot;new_value&quot;);&#10;&#10;// Unlock (coordinator propagates changes to other nodes)&#10;jvnObj.jvnUnLock();&#10;```&#10;&#10;## Key Points About jvnGetSharedObject&#10;&#10;1. **Cache Coherency**: The object returned is always the most recent version thanks to the locking protocol&#10;2. **No Direct Network Calls**: This method returns the locally cached copy (updated during lock acquisition)&#10;3. **Type Safety**: You need to cast the returned Serializable to your actual type&#10;4. **State Consistency**: The object state is synchronized across all distributed nodes&#10;&#10;## The Distributed Coordination&#10;&#10;1. **Coordinator Role**: &#10;   - Assigns unique IDs&#10;   - Manages locks&#10;   - Ensures consistency across nodes&#10;&#10;2. **Local Server Role**:&#10;   - Caches objects locally&#10;   - Handles lock requests through coordinator&#10;   - Maintains both name→object and ID→object mappings&#10;&#10;3. **JvnObject Role**:&#10;   - Wraps your actual data&#10;   - Manages local lock state&#10;   - Provides access to the cached data via jvnGetSharedObject()&#10;&#10;## Example Usage Pattern&#10;&#10;```java&#10;// Server A creates and shares data&#10;JvnObject cache = server.jvnCreateObject(new HashMap&lt;String, String&gt;());&#10;server.jvnRegisterObject(&quot;global_cache&quot;, cache);&#10;&#10;// Server B accesses the same data&#10;JvnObject sameCache = server.jvnLookupObject(&quot;global_cache&quot;);&#10;sameCache.jvnLockRead();&#10;Map&lt;String, String&gt; data = (Map&lt;String, String&gt;) sameCache.jvnGetSharedObject();&#10;// data is now synchronized with Server A's version&#10;sameCache.jvnUnLock();&#10;```&#10;&#10;This system provides distributed shared memory with strong consistency guarantees!" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/CacheExample.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/CacheExample.java" />
              <option name="updatedContent" value="import jvn.Implementations.JvnServerImpl;&#10;import jvn.Models.JvnLocalServer;&#10;import jvn.Models.JvnObject;&#10;import jvn.Exceptions.JvnException;&#10;&#10;import java.io.Serializable;&#10;import java.util.HashMap;&#10;&#10;/**&#10; * Example demonstrating how the distributed cache system works&#10; */&#10;public class CacheExample {&#10;    &#10;    public static void main(String[] args) {&#10;        try {&#10;            // Get the JVN server instance&#10;            JvnLocalServer server = JvnServerImpl.jvnGetServer();&#10;            &#10;            // Example 1: Creating and registering a shared object&#10;            System.out.println(&quot;=== Creating and Registering Objects ===&quot;);&#10;            &#10;            // Create a HashMap to be shared across the distributed system&#10;            HashMap&lt;String, String&gt; sharedMap = new HashMap&lt;&gt;();&#10;            sharedMap.put(&quot;key1&quot;, &quot;initial_value&quot;);&#10;            &#10;            // Create a JVN object (gets an ID from coordinator)&#10;            JvnObject jvnSharedMap = server.jvnCreateObject(sharedMap);&#10;            System.out.println(&quot;Created JVN object with ID: &quot; + jvnSharedMap.jvnGetObjectId());&#10;            &#10;            // Register it with a symbolic name (STRING name for lookup)&#10;            server.jvnRegisterObject(&quot;my_shared_map&quot;, jvnSharedMap);&#10;            System.out.println(&quot;Registered object with name: 'my_shared_map'&quot;);&#10;            &#10;            // Example 2: Looking up an object by name&#10;            System.out.println(&quot;\n=== Looking Up Objects ===&quot;);&#10;            JvnObject foundObject = server.jvnLookupObject(&quot;my_shared_map&quot;);&#10;            if (foundObject != null) {&#10;                System.out.println(&quot;Found object with ID: &quot; + foundObject.jvnGetObjectId());&#10;            }&#10;            &#10;            // Example 3: Using the distributed cache with proper locking&#10;            System.out.println(&quot;\n=== Using the Cache ===&quot;);&#10;            demonstrateReading(jvnSharedMap);&#10;            demonstrateWriting(jvnSharedMap);&#10;            &#10;        } catch (JvnException e) {&#10;            System.err.println(&quot;JVN Error: &quot; + e.getMessage());&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Demonstrates how to read from the shared object&#10;     */&#10;    private static void demonstrateReading(JvnObject jvnObj) throws JvnException {&#10;        System.out.println(&quot;--- Reading from shared object ---&quot;);&#10;        &#10;        // Step 1: Acquire read lock&#10;        jvnObj.jvnLockRead();&#10;        &#10;        try {&#10;            // Step 2: Get the shared object (this is where jvnGetSharedObject is used!)&#10;            @SuppressWarnings(&quot;unchecked&quot;)&#10;            HashMap&lt;String, String&gt; map = (HashMap&lt;String, String&gt;) jvnObj.jvnGetSharedObject();&#10;            &#10;            // Step 3: Read from it&#10;            System.out.println(&quot;Current value for 'key1': &quot; + map.get(&quot;key1&quot;));&#10;            System.out.println(&quot;Map contents: &quot; + map);&#10;            &#10;        } finally {&#10;            // Step 4: Always unlock&#10;            jvnObj.jvnUnLock();&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Demonstrates how to write to the shared object&#10;     */&#10;    private static void demonstrateWriting(JvnObject jvnObj) throws JvnException {&#10;        System.out.println(&quot;--- Writing to shared object ---&quot;);&#10;        &#10;        // Step 1: Acquire write lock (gets latest version from coordinator)&#10;        jvnObj.jvnLockWrite();&#10;        &#10;        try {&#10;            // Step 2: Get the shared object&#10;            @SuppressWarnings(&quot;unchecked&quot;)&#10;            HashMap&lt;String, String&gt; map = (HashMap&lt;String, String&gt;) jvnObj.jvnGetSharedObject();&#10;            &#10;            // Step 3: Modify it&#10;            map.put(&quot;key1&quot;, &quot;updated_value_&quot; + System.currentTimeMillis());&#10;            map.put(&quot;key2&quot;, &quot;new_key_added&quot;);&#10;            &#10;            System.out.println(&quot;Updated map: &quot; + map);&#10;            &#10;            // The modifications are automatically synchronized when we unlock&#10;        } finally {&#10;            // Step 4: Unlock (this propagates changes to other nodes)&#10;            jvnObj.jvnUnLock();&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="CopyrightManager" default="" />
  <component name="DependencyValidationManager">
    <option name="SKIP_IMPORT_STATEMENTS" value="false" />
  </component>
  <component name="DiscordProjectSettings">
    <option name="show" value="ASK" />
    <option name="description" value="" />
  </component>
  <component name="EditMigrationStateService">
    <option name="migrationStatus" value="COMPLETED" />
  </component>
  <component name="ExternalStorageConfigurationManager" enabled="true" />
  <component name="GitToolBoxProjectSettings">
    <option name="commitMessageIssueKeyValidationOverride">
      <BoolValueOverride>
        <option name="enabled" value="true" />
      </BoolValueOverride>
    </option>
    <option name="commitMessageValidationEnabledOverride">
      <BoolValueOverride>
        <option name="enabled" value="true" />
      </BoolValueOverride>
    </option>
  </component>
  <component name="GradleMigrationSettings" migrationVersion="1" />
  <component name="GradleSettings">
    <option name="linkedExternalProjectsSettings">
      <GradleProjectSettings>
        <option name="externalProjectPath" value="$PROJECT_DIR$" />
        <option name="modules">
          <set>
            <option value="$PROJECT_DIR$" />
          </set>
        </option>
      </GradleProjectSettings>
    </option>
  </component>
  <component name="GradleUISettings">
    <setting name="root" />
  </component>
  <component name="GradleUISettings2">
    <setting name="root" />
  </component>
  <component name="IdProvider" IDEtalkID="11DA1DB66DD62DDA1ED602B7079FE97C" />
  <component name="InspectionProjectProfileManager">
    <profile version="1.0">
      <option name="myName" value="Project Default" />
      <inspection_tool class="JSHint" enabled="true" level="ERROR" enabled_by_default="true" />
    </profile>
    <version value="1.0" />
  </component>
  <component name="JavadocGenerationManager">
    <option name="OUTPUT_DIRECTORY" />
    <option name="OPTION_SCOPE" value="protected" />
    <option name="OPTION_HIERARCHY" value="true" />
    <option name="OPTION_NAVIGATOR" value="true" />
    <option name="OPTION_INDEX" value="true" />
    <option name="OPTION_SEPARATE_INDEX" value="true" />
    <option name="OPTION_DOCUMENT_TAG_USE" value="false" />
    <option name="OPTION_DOCUMENT_TAG_AUTHOR" value="false" />
    <option name="OPTION_DOCUMENT_TAG_VERSION" value="false" />
    <option name="OPTION_DOCUMENT_TAG_DEPRECATED" value="true" />
    <option name="OPTION_DEPRECATED_LIST" value="true" />
    <option name="OTHER_OPTIONS" value="" />
    <option name="HEAP_SIZE" />
    <option name="LOCALE" />
    <option name="OPEN_IN_BROWSER" value="true" />
  </component>
  <component name="ProjectModuleManager">
    <modules>
      <module fileurl="file://$PROJECT_DIR$/javanaise-chat.iml" filepath="$PROJECT_DIR$/javanaise-chat.iml" />
      <module fileurl="file://$PROJECT_DIR$/javanaise-chat.main.iml" filepath="$PROJECT_DIR$/javanaise-chat.main.iml" />
      <module fileurl="file://$PROJECT_DIR$/javanaise-chat.test.iml" filepath="$PROJECT_DIR$/javanaise-chat.test.iml" />
    </modules>
  </component>
  <component name="ProjectRootManager" version="2" languageLevel="JDK_11" project-jdk-name="21" project-jdk-type="JavaSDK">
    <output url="file://$PROJECT_DIR$/out" />
  </component>
  <component name="ProjectRunConfigurationManager">
    <configuration default="false" name="Coordinator" type="Application" factoryName="Application" nameIsGenerated="true">
      <option name="MAIN_CLASS_NAME" value="jvn.Coordinator" />
      <module name="javanaise-chat.main" />
      <extension name="coverage">
        <pattern>
          <option name="PATTERN" value="jvn.*" />
          <option name="ENABLED" value="true" />
        </pattern>
      </extension>
      <method v="2">
        <option name="BuildArtifacts" enabled="false" />
        <option name="Make" enabled="true" />
      </method>
    </configuration>
    <configuration default="false" name="Irc" type="Application" factoryName="Application" singleton="false" nameIsGenerated="true">
      <option name="MAIN_CLASS_NAME" value="irc.Irc" />
      <module name="javanaise-chat.main" />
      <extension name="coverage">
        <pattern>
          <option name="PATTERN" value="irc.*" />
          <option name="ENABLED" value="true" />
        </pattern>
      </extension>
      <method v="2">
        <option name="BuildArtifacts" enabled="false" />
        <option name="Make" enabled="true" />
      </method>
    </configuration>
  </component>
  <component name="SvnBranchConfigurationManager">
    <option name="mySupportsUserInfoFilter" value="true" />
  </component>
  <component name="VcsDirectoryMappings">
    <mapping directory="" vcs="Git" />
  </component>
  <component name="masterDetails">
    <states>
      <state key="ArtifactsStructureConfigurable.UI">
        <UIState>
          <splitter-proportions>
            <SplitterProportionsDataImpl />
          </splitter-proportions>
          <settings />
        </UIState>
      </state>
      <state key="Copyright.UI">
        <UIState>
          <splitter-proportions>
            <SplitterProportionsDataImpl />
          </splitter-proportions>
        </UIState>
      </state>
      <state key="ProjectJDKs.UI">
        <UIState>
          <splitter-proportions>
            <SplitterProportionsDataImpl>
              <option name="proportions">
                <list>
                  <option value="0.2" />
                </list>
              </option>
            </SplitterProportionsDataImpl>
          </splitter-proportions>
          <last-edited>1.6</last-edited>
        </UIState>
      </state>
      <state key="ScopeChooserConfigurable.UI">
        <UIState>
          <splitter-proportions>
            <SplitterProportionsDataImpl />
          </splitter-proportions>
          <settings />
        </UIState>
      </state>
    </states>
  </component>
</project>